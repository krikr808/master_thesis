% lithmaketitle.sty is a LaTeX package to create a title page following the LiTH specifications.
% This package is derived from the popular non-standard package titlepic
% By Kristofer Krus <krikr808@student.liu.se>. Free software, no warranty of any kind.
% 
% V. 0.1
% -----------------------------------------------------------------------------

% No idea whether it works on older LaTeXes.
\NeedsTeXFormat{LaTeX2e}

% Use the fancyhdr package to create headers and footers
\RequirePackage{fancyhdr}

% Package identification and version number.
\ProvidesPackage{lithmaketitle}[2012/05/28 0.1 Package create a title page following the LiTH specifications]

% Declare the options.
\DeclareOption{tt}{\gdef\@tptopspace{}\gdef\@tpsepspace{\vskip 3em}}
\DeclareOption{tc}{\gdef\@tptopspace{}\gdef\@tpsepspace{\vfil}}
\DeclareOption{cc}{\gdef\@tptopspace{\null\vfil}\gdef\@tpsepspace{\vskip 3em}}
\ExecuteOptions{cc}
\ProcessOptions

% Define additional commands introduced by this package.
% Very similar to the definition of \title, etc.
% \lithlogo
\def\lithlogo#1{\gdef\@lithlogo{#1}}
\def\@lithlogo{\@empty} % default: no picture
% \lithwork
\def\lithwork#1{\gdef\@lithwork{#1}}
\def\@lithwork{Master thesis work} % default value
% \lithcompany
\def\lithcompany#1{\gdef\@lithcompany{#1}}
\def\@lithcompany{\textit{Company}} % default value
% \lithuniversity
\def\lithuniversity#1{\gdef\@lithuniversity{#1}}
\def\@lithuniversity{Link\"{o}ping University} % default value
% \lithdepartment
\def\lithdepartment#1{\gdef\@lithdepartment{#1}}
\def\@lithdepartment{The Department of Physics, Chemistry and Biology} % default value
% \lithpostaddress
\def\lithpostaddress#1{\gdef\@lithpostaddress{#1}}
\def\@lithpostaddress{581 83 Link\"{o}ping} % default value
% \lithsupervisor
\def\lithsupervisor#1{\gdef\@lithsupervisor{#1}}
\def\@lithsupervisor{\textit{Supervisor}} % default value
% \lithsupervisors
\def\lithsupervisors#1{\gdef\@lithsupervisors{#1}}
%\def\@lithsupervisors{\textit{Supervisors}} % default value
% \lithexaminator
\def\lithexaminator#1{\gdef\@lithexaminator{#1}}
\def\@lithexaminator{\textit{Examinator}} % default value

% If a title page was requested from the document class (article/report/book),
% define \lithmaketitle.
\if@titlepage
\newcommand\lithmaketitle{
    \begin{titlepage}%
        \let\footnotesize\small
        \let\footnoterule\relax
        \let \footnote \thanks
        \renewcommand{\headrulewidth}{0pt} % Remove horozontal ruler under header
        %TODO: Fix so that the headers and footers get wider (see line below)
        %\fancyheadoffset[LE,RO]{\marginparsep + \marginparwidth} % Make header and footer wider
        {\bf \large \begin{center}% Make the font on the title page get a bold face and center the content
            % Page 1
            \thispagestyle{fancy}
            \chead{\bf \large \@lithdepartment}
            \cfoot{\bf \small \@lithuniversity\ \@lithdepartment \\ \@lithpostaddress}
            \@tptopspace%
            \@lithwork
            \vskip 1em%
            {\LARGE \@title \par}%
            \vskip 3em%
            \lineskip .75em%
            \begin{tabular}[t]{c}%
                \@author \\
                \@lithwork\ carried out at \@lithcompany \\
                \@date
            \end{tabular}\par%
            \vskip 1.5em%
            LITH-IFM-x-EX--yy/xxxx--SE
            \@tpsepspace%
            {\centering\@lithlogo\par}
            \newpage
            
            % Page 2
            \thispagestyle{fancy}
            \chead{\bf \large \@lithdepartment}
            \cfoot{}
            \@tptopspace%
            {\LARGE \@title \par}%
            \vskip 3em%
            \lineskip .75em%
            \begin{tabular}[t]{c}%
                \@author \\ \\
                \@lithwork\ carried out at \@lithcompany \\ \\
                \@date
            \end{tabular}\par%
            \vskip 1.5em%
            \ifx \@lithsupervisors \undefined
            Supervisor: \\
            \@lithsupervisor
            \else
            Supervisors: \\
            \@lithsupervisors
            \fi
            \vskip 1em%
            Examinator: \\
            \@lithexaminator
            \@tpsepspace%
            {\centering\@lithlogo\par}
            \vfil
        \end{center}\par }
        \@thanks
    \end{titlepage}%
    \setcounter{footnote}{0}%
    \global\let\thanks\relax
    \global\let\maketitle\relax
    \global\let\@thanks\@empty
    \global\let\@author\@empty
    \global\let\@date\@empty
    \global\let\@title\@empty
    \global\let\@lithlogo\@empty
    \global\let\title\relax
    \global\let\author\relax
    \global\let\date\relax
    \global\let\and\relax
    \global\let\titlepic\relax
}
\fi
